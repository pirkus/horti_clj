{"ast":null,"code":"var _jsxFileName = \"/home/filken/dev/horti_clj/horti-ui/src/components/GardenCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useRef, useCallback } from 'react';\nimport { Box, Paper, Text, Button, Modal, TextInput, Grid, Select, Badge, Alert, Group, Stack, Textarea } from '@mantine/core';\nimport { DateTimePicker, DateInput, TimeInput, DatePicker } from '@mantine/dates';\nimport { IconChartLine, IconTimeline, IconClock } from '@tabler/icons-react';\nimport { UserContext } from '../contexts/UserContext';\nimport MetricsViewer from './MetricsViewer';\nimport { createStyles } from '@mantine/core';\n\n// Custom styles for DatePicker\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = createStyles(theme => ({\n  calendarHeader: {\n    marginBottom: '10px'\n  },\n  calendarHeaderControl: {\n    width: '24px',\n    height: '24px',\n    fontSize: '14px',\n    borderRadius: '4px',\n    color: theme.colors.green[6],\n    '&:hover': {\n      backgroundColor: theme.colors.gray[0]\n    }\n  },\n  day: {\n    borderRadius: '4px',\n    height: '34px',\n    width: '34px',\n    fontSize: '14px',\n    '&[data-selected]': {\n      backgroundColor: theme.colors.green[6]\n    }\n  },\n  monthCell: {\n    fontSize: '14px'\n  },\n  yearCell: {\n    fontSize: '14px'\n  },\n  weekday: {\n    fontSize: '12px',\n    color: theme.colors.green[7],\n    fontWeight: 500\n  },\n  weekdayCell: {\n    fontSize: '12px',\n    textTransform: 'uppercase'\n  }\n}));\nconst GardenCanvas = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const [plants, setPlants] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedPlant, setSelectedPlant] = useState(null);\n  const [showAddPlant, setShowAddPlant] = useState(false);\n  const [showMetrics, setShowMetrics] = useState(false);\n  const [showMetricsViewer, setShowMetricsViewer] = useState(false);\n  const [canvasSize] = useState({\n    width: 800,\n    height: 600\n  });\n\n  // Enhanced drag state with threshold detection\n  const [isDragging, setIsDragging] = useState(false);\n  const [draggedPlant, setDraggedPlant] = useState(null);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [mouseDownPos, setMouseDownPos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [mouseDownPlant, setMouseDownPlant] = useState(null);\n  const [hasDraggedBeyondThreshold, setHasDraggedBeyondThreshold] = useState(false);\n  const DRAG_THRESHOLD = 5; // pixels\n\n  const [newPlant, setNewPlant] = useState({\n    name: '',\n    species: '',\n    imageUrl: '',\n    x: 0,\n    y: 0\n  });\n  const [newMetrics, setNewMetrics] = useState({\n    date: new Date(),\n    time: new Date().toTimeString().slice(0, 5),\n    // HH:MM format\n    ec: '',\n    ph: '',\n    notes: ''\n  });\n  const {\n    token\n  } = useContext(UserContext);\n  const defaultPlantImages = [{\n    name: 'Tomato',\n    url: 'https://via.placeholder.com/50x50/4caf50/ffffff?text=🍅'\n  }, {\n    name: 'Lettuce',\n    url: 'https://via.placeholder.com/50x50/66bb6a/ffffff?text=🥬'\n  }, {\n    name: 'Basil',\n    url: 'https://via.placeholder.com/50x50/8bc34a/ffffff?text=🌿'\n  }, {\n    name: 'Pepper',\n    url: 'https://via.placeholder.com/50x50/ff7043/ffffff?text=🌶️'\n  }, {\n    name: 'Spinach',\n    url: 'https://via.placeholder.com/50x50/4caf50/ffffff?text=🥬'\n  }];\n  const fetchPlants = useCallback(async () => {\n    try {\n      const response = await fetch('/api/plants', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setPlants(data);\n      } else {\n        setError('Failed to fetch plants');\n      }\n    } catch (err) {\n      setError('Error connecting to server');\n    } finally {\n      setLoading(false);\n    }\n  }, [token]);\n  useEffect(() => {\n    if (token) {\n      fetchPlants();\n    }\n  }, [token, fetchPlants]);\n  const drawCanvas = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n\n    // Clear canvas\n    ctx.fillStyle = '#f1f8e9';\n    ctx.fillRect(0, 0, canvasSize.width, canvasSize.height);\n\n    // Draw grid\n    ctx.strokeStyle = '#e0e0e0';\n    ctx.lineWidth = 1;\n    for (let x = 0; x <= canvasSize.width; x += 50) {\n      ctx.beginPath();\n      ctx.moveTo(x, 0);\n      ctx.lineTo(x, canvasSize.height);\n      ctx.stroke();\n    }\n    for (let y = 0; y <= canvasSize.height; y += 50) {\n      ctx.beginPath();\n      ctx.moveTo(0, y);\n      ctx.lineTo(canvasSize.width, y);\n      ctx.stroke();\n    }\n\n    // Draw plants\n    plants.forEach(plant => {\n      if (plant.x !== undefined && plant.y !== undefined) {\n        // Highlight dragged plant\n        const isBeingDragged = (draggedPlant === null || draggedPlant === void 0 ? void 0 : draggedPlant.id) === plant.id;\n        const isSelected = (selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.id) === plant.id;\n\n        // Draw plant circle with different colors for different states\n        if (isBeingDragged) {\n          ctx.fillStyle = '#2196f3'; // Blue when dragging\n        } else if (isSelected) {\n          ctx.fillStyle = '#ff9800'; // Orange when selected\n        } else {\n          ctx.fillStyle = '#4caf50'; // Green normally\n        }\n        ctx.beginPath();\n        ctx.arc(plant.x, plant.y, 25, 0, 2 * Math.PI);\n        ctx.fill();\n\n        // Draw plant name\n        ctx.fillStyle = '#ffffff';\n        ctx.font = '12px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(plant.name, plant.x, plant.y + 4);\n\n        // Draw drag indicator for dragged plant\n        if (isBeingDragged) {\n          ctx.strokeStyle = '#1976d2';\n          ctx.lineWidth = 2;\n          ctx.setLineDash([5, 5]);\n          ctx.beginPath();\n          ctx.arc(plant.x, plant.y, 30, 0, 2 * Math.PI);\n          ctx.stroke();\n          ctx.setLineDash([]);\n        }\n      }\n    });\n  }, [plants, selectedPlant, draggedPlant, canvasSize.width, canvasSize.height]);\n  useEffect(() => {\n    if (!loading) {\n      drawCanvas();\n    }\n  }, [loading, drawCanvas]);\n  const getMousePos = event => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    return {\n      x: event.clientX - rect.left,\n      y: event.clientY - rect.top\n    };\n  };\n  const findPlantAtPosition = (x, y) => {\n    return plants.find(plant => {\n      const distance = Math.sqrt((x - plant.x) ** 2 + (y - plant.y) ** 2);\n      return distance <= 25;\n    });\n  };\n  const updatePlantPosition = async (plantId, newX, newY) => {\n    try {\n      const response = await fetch(`/api/plants/${plantId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          x: newX,\n          y: newY\n        })\n      });\n      if (response.ok) {\n        // Update local state\n        setPlants(prev => prev.map(plant => plant.id === plantId ? {\n          ...plant,\n          x: newX,\n          y: newY\n        } : plant));\n      } else {\n        setError('Failed to update plant position');\n        // Revert to original position by refetching\n        fetchPlants();\n      }\n    } catch (err) {\n      setError('Error updating plant position');\n      fetchPlants();\n    }\n  };\n  const handleMouseDown = event => {\n    const mousePos = getMousePos(event);\n    const clickedPlant = findPlantAtPosition(mousePos.x, mousePos.y);\n    if (clickedPlant) {\n      // Track initial mouse position and clicked plant for potential drag\n      setMouseDownPos(mousePos);\n      setMouseDownPlant(clickedPlant);\n      setDragOffset({\n        x: mousePos.x - clickedPlant.x,\n        y: mousePos.y - clickedPlant.y\n      });\n\n      // Change cursor to indicate potential drag\n      const canvas = canvasRef.current;\n      canvas.style.cursor = 'grabbing';\n    }\n  };\n  const handleMouseMove = event => {\n    const mousePos = getMousePos(event);\n    const canvas = canvasRef.current;\n    if (mouseDownPlant && !isDragging) {\n      // Check if we've moved beyond the drag threshold\n      const distance = Math.sqrt(Math.pow(mousePos.x - mouseDownPos.x, 2) + Math.pow(mousePos.y - mouseDownPos.y, 2));\n      if (distance > DRAG_THRESHOLD) {\n        // Start actual dragging\n        setIsDragging(true);\n        setDraggedPlant(mouseDownPlant);\n        setHasDraggedBeyondThreshold(true);\n      }\n    }\n    if (isDragging && draggedPlant) {\n      // Update plant position in real-time during drag\n      const newX = Math.max(25, Math.min(canvasSize.width - 25, mousePos.x - dragOffset.x));\n      const newY = Math.max(25, Math.min(canvasSize.height - 25, mousePos.y - dragOffset.y));\n\n      // Update local state for immediate visual feedback\n      setPlants(prev => prev.map(plant => plant.id === draggedPlant.id ? {\n        ...plant,\n        x: newX,\n        y: newY\n      } : plant));\n    } else if (!mouseDownPlant) {\n      // Update cursor based on what's under the mouse\n      const plantUnderMouse = findPlantAtPosition(mousePos.x, mousePos.y);\n      canvas.style.cursor = plantUnderMouse ? 'grab' : 'crosshair';\n    }\n  };\n  const handleMouseUp = async event => {\n    const mousePos = getMousePos(event);\n    const canvas = canvasRef.current;\n    if (isDragging && draggedPlant) {\n      // Handle end of drag - save position to backend\n      const newX = Math.max(25, Math.min(canvasSize.width - 25, mousePos.x - dragOffset.x));\n      const newY = Math.max(25, Math.min(canvasSize.height - 25, mousePos.y - dragOffset.y));\n      await updatePlantPosition(draggedPlant.id, newX, newY);\n    } else if (mouseDownPlant && !hasDraggedBeyondThreshold) {\n      // This was a click, not a drag - open metrics dialog\n      setSelectedPlant(mouseDownPlant);\n      setShowMetrics(true);\n    }\n\n    // Reset all drag-related state\n    setIsDragging(false);\n    setDraggedPlant(null);\n    setMouseDownPlant(null);\n    setHasDraggedBeyondThreshold(false);\n    setDragOffset({\n      x: 0,\n      y: 0\n    });\n    setMouseDownPos({\n      x: 0,\n      y: 0\n    });\n    canvas.style.cursor = 'crosshair';\n  };\n  const handleCanvasClick = event => {\n    // Only handle clicks for adding new plants in empty space\n    // Plant clicks are now handled in handleMouseUp\n    if (isDragging || mouseDownPlant) return;\n    const mousePos = getMousePos(event);\n    const clickedPlant = findPlantAtPosition(mousePos.x, mousePos.y);\n    if (!clickedPlant) {\n      // Add new plant at clicked position (empty space)\n      setNewPlant(prev => ({\n        ...prev,\n        x: mousePos.x,\n        y: mousePos.y\n      }));\n      setShowAddPlant(true);\n    }\n  };\n  const handleAddPlant = async () => {\n    try {\n      const response = await fetch('/api/plants', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          name: newPlant.name,\n          species: newPlant.species,\n          x: newPlant.x,\n          y: newPlant.y,\n          'image-url': newPlant.imageUrl,\n          'planting-date': new Date().toISOString().split('T')[0]\n        })\n      });\n      if (response.ok) {\n        setShowAddPlant(false);\n        setNewPlant({\n          name: '',\n          species: '',\n          imageUrl: '',\n          x: 0,\n          y: 0\n        });\n        fetchPlants();\n      } else {\n        setError('Failed to add plant');\n      }\n    } catch (err) {\n      setError('Error adding plant');\n    }\n  };\n  const handleAddMetrics = async () => {\n    if (!selectedPlant) return;\n    try {\n      // Combine date and time into a single timestamp\n      const dateStr = newMetrics.date.toISOString().split('T')[0];\n      const timestamp = new Date(`${dateStr}T${newMetrics.time}:00`).toISOString();\n      const response = await fetch(`/api/plants/${selectedPlant.id}/metrics`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          'plant-id': selectedPlant.id,\n          date: timestamp,\n          ec: parseFloat(newMetrics.ec) || null,\n          ph: parseFloat(newMetrics.ph) || null,\n          notes: newMetrics.notes\n        })\n      });\n      if (response.ok) {\n        setShowMetrics(false);\n        setNewMetrics({\n          date: new Date(),\n          time: new Date().toTimeString().slice(0, 5),\n          ec: '',\n          ph: '',\n          notes: ''\n        });\n        setSelectedPlant(null);\n      } else {\n        setError('Failed to add metrics');\n      }\n    } catch (err) {\n      setError('Error adding metrics');\n    }\n  };\n  const handleViewMetrics = () => {\n    setShowMetrics(false);\n    setShowMetricsViewer(true);\n  };\n\n  // Add styles to component\n  const {\n    classes\n  } = useStyles();\n  if (loading) return /*#__PURE__*/_jsxDEV(Text, {\n    children: \"Loading garden...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 428,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      shadow: \"md\",\n      p: \"md\",\n      mb: \"xl\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        size: \"xl\",\n        fw: 700,\n        c: \"teal\",\n        children: \"\\uD83C\\uDF31 Interactive Garden Canvas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        c: \"dimmed\",\n        mb: \"md\",\n        children: \"Click anywhere to add a plant, drag plants to move them, or click on existing plants to log daily metrics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Group, {\n        spacing: \"xs\",\n        children: [/*#__PURE__*/_jsxDEV(Badge, {\n          variant: \"outline\",\n          color: \"teal\",\n          size: \"sm\",\n          children: \"\\uD83D\\uDCA1 Click empty space to add plants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Badge, {\n          variant: \"outline\",\n          color: \"teal\",\n          size: \"sm\",\n          children: \"\\uD83D\\uDDB1\\uFE0F Drag plants to move them around\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Badge, {\n          variant: \"outline\",\n          color: \"teal\",\n          size: \"sm\",\n          children: \"\\uD83D\\uDCCA Click plants to log EC & pH\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      color: \"red\",\n      mb: \"xl\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      shadow: \"md\",\n      p: \"md\",\n      style: {\n        display: 'inline-block'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        width: canvasSize.width,\n        height: canvasSize.height,\n        onMouseDown: handleMouseDown,\n        onMouseMove: handleMouseMove,\n        onMouseUp: handleMouseUp,\n        onClick: handleCanvasClick,\n        style: {\n          border: '2px solid #20c997',\n          borderRadius: '8px',\n          cursor: 'crosshair',\n          backgroundColor: '#f1f8e9'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      opened: showAddPlant,\n      onClose: () => setShowAddPlant(false),\n      title: `Add Plant at (${Math.round(newPlant.x)}, ${Math.round(newPlant.y)})`,\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TextInput, {\n          label: \"Plant Name\",\n          value: newPlant.name,\n          onChange: e => setNewPlant({\n            ...newPlant,\n            name: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n          label: \"Species\",\n          value: newPlant.species,\n          onChange: e => setNewPlant({\n            ...newPlant,\n            species: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          label: \"Plant Type (optional)\",\n          value: newPlant.imageUrl,\n          onChange: value => setNewPlant({\n            ...newPlant,\n            imageUrl: value\n          }),\n          data: defaultPlantImages.map((img, index) => ({\n            value: img.url,\n            label: img.name\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Group, {\n          position: \"right\",\n          mt: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"default\",\n            onClick: () => setShowAddPlant(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleAddPlant,\n            children: \"Add Plant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      opened: showMetrics,\n      onClose: () => setShowMetrics(false),\n      size: \"lg\",\n      title: `Log Daily Metrics - ${selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.name}`,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        size: \"sm\",\n        c: \"dimmed\",\n        mb: \"md\",\n        children: [\"Position: (\", selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.x, \", \", selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.y, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Stack, {\n        spacing: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          children: [/*#__PURE__*/_jsxDEV(Grid.Col, {\n            span: 8,\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              label: \"Date\",\n              value: newMetrics.date,\n              onChange: value => setNewMetrics({\n                ...newMetrics,\n                date: value || new Date()\n              }),\n              classNames: {\n                calendarHeader: classes.calendarHeader,\n                calendarHeaderControl: classes.calendarHeaderControl,\n                day: classes.day,\n                monthCell: classes.monthCell,\n                yearCell: classes.yearCell,\n                weekday: classes.weekday,\n                weekdayCell: classes.weekdayCell\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid.Col, {\n            span: 4,\n            children: /*#__PURE__*/_jsxDEV(TextInput, {\n              type: \"time\",\n              label: \"Time\",\n              value: newMetrics.time,\n              onChange: e => setNewMetrics({\n                ...newMetrics,\n                time: e.target.value\n              }),\n              styles: {\n                input: {\n                  height: '36px',\n                  border: '1px solid #E9ECEF',\n                  '&:focus': {\n                    borderColor: '#4CAF50'\n                  }\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid.Col, {\n            span: 6,\n            children: /*#__PURE__*/_jsxDEV(TextInput, {\n              label: \"EC (Electrical Conductivity)\",\n              placeholder: \"e.g., 1.2\",\n              value: newMetrics.ec,\n              onChange: e => setNewMetrics({\n                ...newMetrics,\n                ec: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid.Col, {\n            span: 6,\n            children: /*#__PURE__*/_jsxDEV(TextInput, {\n              label: \"pH Level\",\n              placeholder: \"e.g., 6.5\",\n              value: newMetrics.ph,\n              onChange: e => setNewMetrics({\n                ...newMetrics,\n                ph: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid.Col, {\n            span: 12,\n            children: /*#__PURE__*/_jsxDEV(Textarea, {\n              label: \"Notes\",\n              placeholder: \"Any observations about the plant today...\",\n              value: newMetrics.notes,\n              onChange: e => setNewMetrics({\n                ...newMetrics,\n                notes: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Group, {\n          position: \"right\",\n          mt: \"md\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"default\",\n            onClick: () => setShowMetrics(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            leftIcon: /*#__PURE__*/_jsxDEV(IconTimeline, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 49\n            }, this),\n            onClick: handleViewMetrics,\n            children: \"View Metrics History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            leftIcon: /*#__PURE__*/_jsxDEV(IconChartLine, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 31\n            }, this),\n            onClick: handleAddMetrics,\n            children: \"Log Metrics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      opened: showMetricsViewer,\n      onClose: () => setShowMetricsViewer(false),\n      size: \"xl\",\n      title: `Metrics History - ${selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.name}`,\n      children: [/*#__PURE__*/_jsxDEV(MetricsViewer, {\n        plantId: selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.id,\n        plantName: selectedPlant === null || selectedPlant === void 0 ? void 0 : selectedPlant.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Group, {\n        position: \"right\",\n        mt: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"default\",\n          onClick: () => setShowMetricsViewer(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            setShowMetricsViewer(false);\n            setShowMetrics(true);\n          },\n          leftIcon: /*#__PURE__*/_jsxDEV(IconChartLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 23\n          }, this),\n          children: \"Log New Metrics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 431,\n    columnNumber: 5\n  }, this);\n};\n_s(GardenCanvas, \"AgCEKKB2N9dhd8xVQp4KeVeJsk0=\", false, function () {\n  return [useStyles];\n});\n_c = GardenCanvas;\nexport default GardenCanvas;\nvar _c;\n$RefreshReg$(_c, \"GardenCanvas\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","useCallback","Box","Paper","Text","Button","Modal","TextInput","Grid","Select","Badge","Alert","Group","Stack","Textarea","DateTimePicker","DateInput","TimeInput","DatePicker","IconChartLine","IconTimeline","IconClock","UserContext","MetricsViewer","createStyles","jsxDEV","_jsxDEV","useStyles","theme","calendarHeader","marginBottom","calendarHeaderControl","width","height","fontSize","borderRadius","color","colors","green","backgroundColor","gray","day","monthCell","yearCell","weekday","fontWeight","weekdayCell","textTransform","GardenCanvas","_s","canvasRef","plants","setPlants","loading","setLoading","error","setError","selectedPlant","setSelectedPlant","showAddPlant","setShowAddPlant","showMetrics","setShowMetrics","showMetricsViewer","setShowMetricsViewer","canvasSize","isDragging","setIsDragging","draggedPlant","setDraggedPlant","dragOffset","setDragOffset","x","y","mouseDownPos","setMouseDownPos","mouseDownPlant","setMouseDownPlant","hasDraggedBeyondThreshold","setHasDraggedBeyondThreshold","DRAG_THRESHOLD","newPlant","setNewPlant","name","species","imageUrl","newMetrics","setNewMetrics","date","Date","time","toTimeString","slice","ec","ph","notes","token","defaultPlantImages","url","fetchPlants","response","fetch","headers","ok","data","json","err","drawCanvas","canvas","current","ctx","getContext","fillStyle","fillRect","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","forEach","plant","undefined","isBeingDragged","id","isSelected","arc","Math","PI","fill","font","textAlign","fillText","setLineDash","getMousePos","event","rect","getBoundingClientRect","clientX","left","clientY","top","findPlantAtPosition","find","distance","sqrt","updatePlantPosition","plantId","newX","newY","method","body","JSON","stringify","prev","map","handleMouseDown","mousePos","clickedPlant","style","cursor","handleMouseMove","pow","max","min","plantUnderMouse","handleMouseUp","handleCanvasClick","handleAddPlant","toISOString","split","handleAddMetrics","dateStr","timestamp","parseFloat","handleViewMetrics","classes","children","fileName","_jsxFileName","lineNumber","columnNumber","shadow","p","mb","size","fw","c","spacing","variant","display","ref","onMouseDown","onMouseMove","onMouseUp","onClick","border","opened","onClose","title","round","label","value","onChange","e","target","img","index","position","mt","Col","span","classNames","type","styles","input","borderColor","placeholder","leftIcon","plantName","_c","$RefreshReg$"],"sources":["/home/filken/dev/horti_clj/horti-ui/src/components/GardenCanvas.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef, useCallback } from 'react';\nimport {\n  Box,\n  Paper,\n  Text,\n  Button,\n  Modal,\n  TextInput,\n  Grid,\n  Select,\n  Badge,\n  Alert,\n  Group,\n  Stack,\n  Textarea,\n} from '@mantine/core';\nimport { DateTimePicker, DateInput, TimeInput, DatePicker } from '@mantine/dates';\nimport { IconChartLine, IconTimeline, IconClock } from '@tabler/icons-react';\nimport { UserContext } from '../contexts/UserContext';\nimport MetricsViewer from './MetricsViewer';\nimport { createStyles } from '@mantine/core';\n\n// Custom styles for DatePicker\nconst useStyles = createStyles((theme) => ({\n  calendarHeader: {\n    marginBottom: '10px',\n  },\n  calendarHeaderControl: {\n    width: '24px',\n    height: '24px',\n    fontSize: '14px',\n    borderRadius: '4px',\n    color: theme.colors.green[6],\n    '&:hover': {\n      backgroundColor: theme.colors.gray[0],\n    },\n  },\n  day: {\n    borderRadius: '4px',\n    height: '34px',\n    width: '34px',\n    fontSize: '14px',\n    '&[data-selected]': {\n      backgroundColor: theme.colors.green[6],\n    },\n  },\n  monthCell: {\n    fontSize: '14px',\n  },\n  yearCell: {\n    fontSize: '14px',\n  },\n  weekday: {\n    fontSize: '12px',\n    color: theme.colors.green[7],\n    fontWeight: 500,\n  },\n  weekdayCell: {\n    fontSize: '12px',\n    textTransform: 'uppercase',\n  }\n}));\n\nconst GardenCanvas = () => {\n  const canvasRef = useRef(null);\n  const [plants, setPlants] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedPlant, setSelectedPlant] = useState(null);\n  const [showAddPlant, setShowAddPlant] = useState(false);\n  const [showMetrics, setShowMetrics] = useState(false);\n  const [showMetricsViewer, setShowMetricsViewer] = useState(false);\n  const [canvasSize] = useState({ width: 800, height: 600 });\n  \n  // Enhanced drag state with threshold detection\n  const [isDragging, setIsDragging] = useState(false);\n  const [draggedPlant, setDraggedPlant] = useState(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [mouseDownPos, setMouseDownPos] = useState({ x: 0, y: 0 });\n  const [mouseDownPlant, setMouseDownPlant] = useState(null);\n  const [hasDraggedBeyondThreshold, setHasDraggedBeyondThreshold] = useState(false);\n  \n  const DRAG_THRESHOLD = 5; // pixels\n\n  const [newPlant, setNewPlant] = useState({\n    name: '',\n    species: '',\n    imageUrl: '',\n    x: 0,\n    y: 0\n  });\n\n  const [newMetrics, setNewMetrics] = useState({\n    date: new Date(),\n    time: new Date().toTimeString().slice(0, 5), // HH:MM format\n    ec: '',\n    ph: '',\n    notes: ''\n  });\n\n  const { token } = useContext(UserContext);\n\n  const defaultPlantImages = [\n    { name: 'Tomato', url: 'https://via.placeholder.com/50x50/4caf50/ffffff?text=🍅' },\n    { name: 'Lettuce', url: 'https://via.placeholder.com/50x50/66bb6a/ffffff?text=🥬' },\n    { name: 'Basil', url: 'https://via.placeholder.com/50x50/8bc34a/ffffff?text=🌿' },\n    { name: 'Pepper', url: 'https://via.placeholder.com/50x50/ff7043/ffffff?text=🌶️' },\n    { name: 'Spinach', url: 'https://via.placeholder.com/50x50/4caf50/ffffff?text=🥬' },\n  ];\n\n  const fetchPlants = useCallback(async () => {\n    try {\n      const response = await fetch('/api/plants', {\n        headers: { 'Authorization': `Bearer ${token}` },\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setPlants(data);\n      } else {\n        setError('Failed to fetch plants');\n      }\n    } catch (err) {\n      setError('Error connecting to server');\n    } finally {\n      setLoading(false);\n    }\n  }, [token]);\n\n  useEffect(() => {\n    if (token) {\n      fetchPlants();\n    }\n  }, [token, fetchPlants]);\n\n  const drawCanvas = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    \n    // Clear canvas\n    ctx.fillStyle = '#f1f8e9';\n    ctx.fillRect(0, 0, canvasSize.width, canvasSize.height);\n    \n    // Draw grid\n    ctx.strokeStyle = '#e0e0e0';\n    ctx.lineWidth = 1;\n    for (let x = 0; x <= canvasSize.width; x += 50) {\n      ctx.beginPath();\n      ctx.moveTo(x, 0);\n      ctx.lineTo(x, canvasSize.height);\n      ctx.stroke();\n    }\n    for (let y = 0; y <= canvasSize.height; y += 50) {\n      ctx.beginPath();\n      ctx.moveTo(0, y);\n      ctx.lineTo(canvasSize.width, y);\n      ctx.stroke();\n    }\n\n    // Draw plants\n    plants.forEach(plant => {\n      if (plant.x !== undefined && plant.y !== undefined) {\n        // Highlight dragged plant\n        const isBeingDragged = draggedPlant?.id === plant.id;\n        const isSelected = selectedPlant?.id === plant.id;\n        \n        // Draw plant circle with different colors for different states\n        if (isBeingDragged) {\n          ctx.fillStyle = '#2196f3'; // Blue when dragging\n        } else if (isSelected) {\n          ctx.fillStyle = '#ff9800'; // Orange when selected\n        } else {\n          ctx.fillStyle = '#4caf50'; // Green normally\n        }\n        \n        ctx.beginPath();\n        ctx.arc(plant.x, plant.y, 25, 0, 2 * Math.PI);\n        ctx.fill();\n        \n        // Draw plant name\n        ctx.fillStyle = '#ffffff';\n        ctx.font = '12px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(plant.name, plant.x, plant.y + 4);\n        \n        // Draw drag indicator for dragged plant\n        if (isBeingDragged) {\n          ctx.strokeStyle = '#1976d2';\n          ctx.lineWidth = 2;\n          ctx.setLineDash([5, 5]);\n          ctx.beginPath();\n          ctx.arc(plant.x, plant.y, 30, 0, 2 * Math.PI);\n          ctx.stroke();\n          ctx.setLineDash([]);\n        }\n      }\n    });\n  }, [plants, selectedPlant, draggedPlant, canvasSize.width, canvasSize.height]);\n\n  useEffect(() => {\n    if (!loading) {\n      drawCanvas();\n    }\n  }, [loading, drawCanvas]);\n\n  const getMousePos = (event) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    return {\n      x: event.clientX - rect.left,\n      y: event.clientY - rect.top\n    };\n  };\n\n  const findPlantAtPosition = (x, y) => {\n    return plants.find(plant => {\n      const distance = Math.sqrt((x - plant.x) ** 2 + (y - plant.y) ** 2);\n      return distance <= 25;\n    });\n  };\n\n  const updatePlantPosition = async (plantId, newX, newY) => {\n    try {\n      const response = await fetch(`/api/plants/${plantId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({ x: newX, y: newY }),\n      });\n\n      if (response.ok) {\n        // Update local state\n        setPlants(prev => prev.map(plant => \n          plant.id === plantId \n            ? { ...plant, x: newX, y: newY }\n            : plant\n        ));\n      } else {\n        setError('Failed to update plant position');\n        // Revert to original position by refetching\n        fetchPlants();\n      }\n    } catch (err) {\n      setError('Error updating plant position');\n      fetchPlants();\n    }\n  };\n\n  const handleMouseDown = (event) => {\n    const mousePos = getMousePos(event);\n    const clickedPlant = findPlantAtPosition(mousePos.x, mousePos.y);\n\n    if (clickedPlant) {\n      // Track initial mouse position and clicked plant for potential drag\n      setMouseDownPos(mousePos);\n      setMouseDownPlant(clickedPlant);\n      setDragOffset({\n        x: mousePos.x - clickedPlant.x,\n        y: mousePos.y - clickedPlant.y\n      });\n      \n      // Change cursor to indicate potential drag\n      const canvas = canvasRef.current;\n      canvas.style.cursor = 'grabbing';\n    }\n  };\n\n  const handleMouseMove = (event) => {\n    const mousePos = getMousePos(event);\n    const canvas = canvasRef.current;\n\n    if (mouseDownPlant && !isDragging) {\n      // Check if we've moved beyond the drag threshold\n      const distance = Math.sqrt(\n        Math.pow(mousePos.x - mouseDownPos.x, 2) + \n        Math.pow(mousePos.y - mouseDownPos.y, 2)\n      );\n      \n      if (distance > DRAG_THRESHOLD) {\n        // Start actual dragging\n        setIsDragging(true);\n        setDraggedPlant(mouseDownPlant);\n        setHasDraggedBeyondThreshold(true);\n      }\n    }\n\n    if (isDragging && draggedPlant) {\n      // Update plant position in real-time during drag\n      const newX = Math.max(25, Math.min(canvasSize.width - 25, mousePos.x - dragOffset.x));\n      const newY = Math.max(25, Math.min(canvasSize.height - 25, mousePos.y - dragOffset.y));\n      \n      // Update local state for immediate visual feedback\n      setPlants(prev => prev.map(plant => \n        plant.id === draggedPlant.id \n          ? { ...plant, x: newX, y: newY }\n          : plant\n      ));\n    } else if (!mouseDownPlant) {\n      // Update cursor based on what's under the mouse\n      const plantUnderMouse = findPlantAtPosition(mousePos.x, mousePos.y);\n      canvas.style.cursor = plantUnderMouse ? 'grab' : 'crosshair';\n    }\n  };\n\n  const handleMouseUp = async (event) => {\n    const mousePos = getMousePos(event);\n    const canvas = canvasRef.current;\n    \n    if (isDragging && draggedPlant) {\n      // Handle end of drag - save position to backend\n      const newX = Math.max(25, Math.min(canvasSize.width - 25, mousePos.x - dragOffset.x));\n      const newY = Math.max(25, Math.min(canvasSize.height - 25, mousePos.y - dragOffset.y));\n      \n      await updatePlantPosition(draggedPlant.id, newX, newY);\n    } else if (mouseDownPlant && !hasDraggedBeyondThreshold) {\n      // This was a click, not a drag - open metrics dialog\n      setSelectedPlant(mouseDownPlant);\n      setShowMetrics(true);\n    }\n    \n    // Reset all drag-related state\n    setIsDragging(false);\n    setDraggedPlant(null);\n    setMouseDownPlant(null);\n    setHasDraggedBeyondThreshold(false);\n    setDragOffset({ x: 0, y: 0 });\n    setMouseDownPos({ x: 0, y: 0 });\n    \n    canvas.style.cursor = 'crosshair';\n  };\n\n  const handleCanvasClick = (event) => {\n    // Only handle clicks for adding new plants in empty space\n    // Plant clicks are now handled in handleMouseUp\n    if (isDragging || mouseDownPlant) return;\n    \n    const mousePos = getMousePos(event);\n    const clickedPlant = findPlantAtPosition(mousePos.x, mousePos.y);\n\n    if (!clickedPlant) {\n      // Add new plant at clicked position (empty space)\n      setNewPlant(prev => ({ ...prev, x: mousePos.x, y: mousePos.y }));\n      setShowAddPlant(true);\n    }\n  };\n\n  const handleAddPlant = async () => {\n    try {\n      const response = await fetch('/api/plants', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          name: newPlant.name,\n          species: newPlant.species,\n          x: newPlant.x,\n          y: newPlant.y,\n          'image-url': newPlant.imageUrl,\n          'planting-date': new Date().toISOString().split('T')[0]\n        }),\n      });\n\n      if (response.ok) {\n        setShowAddPlant(false);\n        setNewPlant({ name: '', species: '', imageUrl: '', x: 0, y: 0 });\n        fetchPlants();\n      } else {\n        setError('Failed to add plant');\n      }\n    } catch (err) {\n      setError('Error adding plant');\n    }\n  };\n\n  const handleAddMetrics = async () => {\n    if (!selectedPlant) return;\n\n    try {\n      // Combine date and time into a single timestamp\n      const dateStr = newMetrics.date.toISOString().split('T')[0];\n      const timestamp = new Date(`${dateStr}T${newMetrics.time}:00`).toISOString();\n      \n      const response = await fetch(`/api/plants/${selectedPlant.id}/metrics`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          'plant-id': selectedPlant.id,\n          date: timestamp,\n          ec: parseFloat(newMetrics.ec) || null,\n          ph: parseFloat(newMetrics.ph) || null,\n          notes: newMetrics.notes\n        }),\n      });\n\n      if (response.ok) {\n        setShowMetrics(false);\n        setNewMetrics({\n          date: new Date(),\n          time: new Date().toTimeString().slice(0, 5),\n          ec: '', ph: '', notes: ''\n        });\n        setSelectedPlant(null);\n      } else {\n        setError('Failed to add metrics');\n      }\n    } catch (err) {\n      setError('Error adding metrics');\n    }\n  };\n\n  const handleViewMetrics = () => {\n    setShowMetrics(false);\n    setShowMetricsViewer(true);\n  };\n\n  // Add styles to component\n  const { classes } = useStyles();\n\n  if (loading) return <Text>Loading garden...</Text>;\n\n  return (\n    <Box>\n      <Paper shadow=\"md\" p=\"md\" mb=\"xl\">\n        <Text size=\"xl\" fw={700} c=\"teal\">\n          🌱 Interactive Garden Canvas\n        </Text>\n        <Text c=\"dimmed\" mb=\"md\">\n          Click anywhere to add a plant, drag plants to move them, or click on existing plants to log daily metrics\n        </Text>\n        <Group spacing=\"xs\">\n          <Badge variant=\"outline\" color=\"teal\" size=\"sm\">💡 Click empty space to add plants</Badge>\n          <Badge variant=\"outline\" color=\"teal\" size=\"sm\">🖱️ Drag plants to move them around</Badge>\n          <Badge variant=\"outline\" color=\"teal\" size=\"sm\">📊 Click plants to log EC & pH</Badge>\n        </Group>\n      </Paper>\n\n      {error && (\n        <Alert color=\"red\" mb=\"xl\">\n          {error}\n        </Alert>\n      )}\n\n      <Paper shadow=\"md\" p=\"md\" style={{ display: 'inline-block' }}>\n        <canvas\n          ref={canvasRef}\n          width={canvasSize.width}\n          height={canvasSize.height}\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onClick={handleCanvasClick}\n          style={{\n            border: '2px solid #20c997',\n            borderRadius: '8px',\n            cursor: 'crosshair',\n            backgroundColor: '#f1f8e9'\n          }}\n        />\n      </Paper>\n\n      {/* Add Plant Dialog */}\n      <Modal opened={showAddPlant} onClose={() => setShowAddPlant(false)} title={`Add Plant at (${Math.round(newPlant.x)}, ${Math.round(newPlant.y)})`}>\n        <Stack spacing=\"md\">\n          <TextInput\n            label=\"Plant Name\"\n            value={newPlant.name}\n            onChange={(e) => setNewPlant({ ...newPlant, name: e.target.value })}\n          />\n          <TextInput\n            label=\"Species\"\n            value={newPlant.species}\n            onChange={(e) => setNewPlant({ ...newPlant, species: e.target.value })}\n          />\n          <Select\n            label=\"Plant Type (optional)\"\n            value={newPlant.imageUrl}\n            onChange={(value) => setNewPlant({ ...newPlant, imageUrl: value })}\n            data={defaultPlantImages.map((img, index) => ({\n              value: img.url,\n              label: img.name\n            }))}\n          />\n          <Group position=\"right\" mt=\"md\">\n            <Button variant=\"default\" onClick={() => setShowAddPlant(false)}>Cancel</Button>\n            <Button onClick={handleAddPlant}>Add Plant</Button>\n          </Group>\n        </Stack>\n      </Modal>\n\n      {/* Daily Metrics Dialog */}\n      <Modal opened={showMetrics} onClose={() => setShowMetrics(false)} size=\"lg\" title={`Log Daily Metrics - ${selectedPlant?.name}`}>\n        <Text size=\"sm\" c=\"dimmed\" mb=\"md\">\n          Position: ({selectedPlant?.x}, {selectedPlant?.y})\n        </Text>\n        <Stack spacing=\"md\">\n          <Grid>\n            <Grid.Col span={8}>\n              <DatePicker\n                label=\"Date\"\n                value={newMetrics.date}\n                onChange={(value) => setNewMetrics({ ...newMetrics, date: value || new Date() })}\n                classNames={{\n                  calendarHeader: classes.calendarHeader,\n                  calendarHeaderControl: classes.calendarHeaderControl,\n                  day: classes.day,\n                  monthCell: classes.monthCell,\n                  yearCell: classes.yearCell,\n                  weekday: classes.weekday,\n                  weekdayCell: classes.weekdayCell\n                }}\n              />\n            </Grid.Col>\n            <Grid.Col span={4}>\n              <TextInput\n                type=\"time\"\n                label=\"Time\"\n                value={newMetrics.time}\n                onChange={(e) => setNewMetrics({ ...newMetrics, time: e.target.value })}\n                styles={{\n                  input: {\n                    height: '36px',\n                    border: '1px solid #E9ECEF',\n                    '&:focus': {\n                      borderColor: '#4CAF50',\n                    }\n                  }\n                }}\n              />\n            </Grid.Col>\n            <Grid.Col span={6}>\n              <TextInput\n                label=\"EC (Electrical Conductivity)\"\n                placeholder=\"e.g., 1.2\"\n                value={newMetrics.ec}\n                onChange={(e) => setNewMetrics({ ...newMetrics, ec: e.target.value })}\n              />\n            </Grid.Col>\n            <Grid.Col span={6}>\n              <TextInput\n                label=\"pH Level\"\n                placeholder=\"e.g., 6.5\"\n                value={newMetrics.ph}\n                onChange={(e) => setNewMetrics({ ...newMetrics, ph: e.target.value })}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <Textarea\n                label=\"Notes\"\n                placeholder=\"Any observations about the plant today...\"\n                value={newMetrics.notes}\n                onChange={(e) => setNewMetrics({ ...newMetrics, notes: e.target.value })}\n              />\n            </Grid.Col>\n          </Grid>\n          <Group position=\"right\" mt=\"md\">\n            <Button variant=\"default\" onClick={() => setShowMetrics(false)}>Cancel</Button>\n            <Button variant=\"outline\" leftIcon={<IconTimeline />} onClick={handleViewMetrics}>\n              View Metrics History\n            </Button>\n            <Button leftIcon={<IconChartLine />} onClick={handleAddMetrics}>\n              Log Metrics\n            </Button>\n          </Group>\n        </Stack>\n      </Modal>\n\n      {/* Metrics Viewer Dialog */}\n      <Modal opened={showMetricsViewer} onClose={() => setShowMetricsViewer(false)} size=\"xl\" title={`Metrics History - ${selectedPlant?.name}`}>\n        <MetricsViewer \n          plantId={selectedPlant?.id} \n          plantName={selectedPlant?.name} \n        />\n        <Group position=\"right\" mt=\"md\">\n          <Button variant=\"default\" onClick={() => setShowMetricsViewer(false)}>Close</Button>\n          <Button \n            onClick={() => {\n              setShowMetricsViewer(false);\n              setShowMetrics(true);\n            }} \n            leftIcon={<IconChartLine />}\n          >\n            Log New Metrics\n          </Button>\n        </Group>\n      </Modal>\n    </Box>\n  );\n};\n\nexport default GardenCanvas; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}